# Use postgres/example user/password credentials
version: '3.9'

services:
  nitelite-pipeline:
    image: nitelite-pipeline:latest
    environment:
      DATABASE_URL: 'postgresql://nitelite:nitelite@database:5432/nitelite'
    depends_on:
      - database
  database:
    # image: postgis/postgis
    build:
      context: ..
      dockerfile: ./build/postgis.Dockerfile
    restart: always
    environment:
      POSTGRES_DB: nitelite
      POSTGRES_USER: nitelite
      POSTGRES_PASSWORD: nitelite
    volumes:
      - /Users/Shared/data/nitelite/db:/var/lib/postgresql/data
    ports:
      - 5432:5432